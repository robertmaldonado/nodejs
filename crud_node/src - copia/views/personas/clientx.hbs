<div class="container mt-5">
    <div class="card shadow p-4">
        <h1 class="mb-4">Entrada Cliente</h1>


        <form action="/client" method="post" id="clienteForm">
            <!-- Fecha Actual -->


            <!-- Mensaje de advertencia -->
            <div class="alert alert-warning text-center" role="alert">
                <h1 class="alert-heading">⚠️<strong>Aviso Importante</strong>⚠️</h4>
                    <p class="fs-1">Estimado cliente, tiene <strong>15 DIAS</strong> para <strong>RETIRAR</strong>
                        su
                        equipo cuando sea notificado. Pasado este tiempo, el equipo será <strong>RECICLADO</strong>
                        para
                        <strong>LIBERAR ESPACIO,</strong> y <strong>NO</strong> podrá ser recuperado.
                    </p>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="checkbox" id="aceptarCondiciones" onchange="validarCheckbox()"
                    autofocus>
                <label class="form-check-label mb-3" for="aceptarCondiciones">
                    Acepto los términos y condiciones.
                </label>
            </div>


            <div class="mb-3">
                <label for="fechaActual" class="form-label">Fecha Actual</label>
                <input type="date" class="form-control" id="fechaActual" name="fechaactual" readonly>
            </div>
            <!-- Nombre -->
            <div class="mb-3">
                <label for="nombre" class="form-label">Nombre</label>
                <input type="text" class="form-control  fs-4" id="nombre" name="nombre" value="{{cliente.nombre}}"
                    placeholder="Ingrese su nombre" required>
                <!-- <div id="emailHelp1" class="form-text">Ingrese su nombre</div> -->
            </div>
            <!-- Teléfono -->
            <div class="mb-3">
                <label for="telefono" class="form-label">Teléfono</label>
                <input type="tel" class="form-control" id="telefono" name="telefono" value="{{cliente.telefono}}"
                    placeholder="" required>
                <div id="emailHelp2" class="form-text">WhatsApp Ej: 1234-5678</div>
            </div>
            <!-- ubicacion -->
            <div class="mb-3">
                <label for="ubicacion" class="form-label">Ubicacion</label>
                <input type="text" class="form-control" id="ubicacion" name="ubicacion" value="{{cliente.ubicacion}}"
                    placeholder="" required>
                <div id="emailHelp" class="form-text">Ingrese su Ubicacion</div>
            </div>
            <!-- cedula -->
            <div class="mb-3">
                <label for="cedula" class="form-label">Cedula</label>
                <input type="text" class="form-control" id="cedula" name="cedula" value="{{cliente.cedula}}"
                    placeholder="opcional" required>
                <!-- <div id="cedulaHelp" class="form-text">Ingrese su Cedula</div> -->
            </div>
            <!-- correo -->
            <div class="mb-3">
                <label for="correo" class="form-label">Correo</label>
                <input type="email" class="form-control" id="correo" name="correo" value="{{cliente.correo}}"
                    placeholder="">
                <div id="correoHelp" class="form-text">Ingrese su Correo Electronico</div>
            </div>
            <!-- Botón Enviar -->
            <button type="submit" class="btn btn-primary" id="enviarBtn">Enviar</button>
        </form>
    </div>
</div>

<script>

    /*  const telefonoInput = document.getElementById('telefono');
 
     telefonoInput.addEventListener('input', function (e) {
         let input = e.target.value;
         // Eliminar todo lo que no sea dígito
         input = input.replace(/\D/g, '');
 
         // Formatear el número
         // Aplicar el formato "1234-5678"
         // Aplicar formato solo si tiene exactamente 8 dígitos
 
 
         // Aplicar formato solo si tiene exactamente 8 dígitos
         if (input.length === 8) {
             input = `${input.slice(0, 4)}-${input.slice(4, 8)}`;
         }
 
         // Establecer el valor formateado
         e.target.value = input;
     }); */
    // Seleccionar el campo de teléfono
    // Seleccionar el campo de teléfono


    /*      // Seleccionar el campo de teléfono
         const telefonoInput = document.getElementById("telefono");
 
         // Evento para formatear el teléfono
         telefonoInput.addEventListener("input", (e) => {
             let valor = e.target.value.replace(/[^0-9]/g, ""); // Eliminar caracteres no numéricos
 
             // Insertar el guion inmediatamente después del cuarto carácter
             if (valor.length > 4) {
                 valor = valor.slice(0, 4) + "-" + valor.slice(4);
             }
 
             e.target.value = valor; // Actualizar el valor del campo
         });
 
         // Prevenir caracteres adicionales al exceder el formato
         telefonoInput.addEventListener("keypress", (e) => {
             const valor = telefonoInput.value.replace(/[^0-9]/g, ""); // Valor sin el guion
             if (valor.length >= 8 && e.key !== "Backspace") {
                 e.preventDefault(); // Prevenir más caracteres si se alcanza el formato
             }
         }); */

    // Seleccionar el campo de teléfono

    const telefonoInput = document.getElementById("telefono");


    let global = "";
    // Evento para formatear el teléfono
    telefonoInput.addEventListener("input", (e) => {
        //let valor =""
        let valor = e.target.value.replace(/[^0-9]/g, ""); // Eliminar caracteres no numéricos
        // let valor = e.target.value; // Actualizar el valor del campo
        //  let n_anterior = valor;
        // Insertar el guion automáticamente al escribir el cuarto número


        if (global.length < 4) {


            if (valor.length == 4) {
                // valor = valor.slice(0, 4) + "-" + valor.slice(4);
                valor = valor + "-"
                e.target.value = valor; // Actualizar el valor del campo
            }
        }

        // Limitar la longitud del formato completo a 9 caracteres (NNNN-NNNN)
        // if (valor.length > 9) {
        //      valor = valor.slice(0, 9);
        // }

        //e.target.value = valor; // Actualizar el valor del campo
        global = valor;

    });



    //enviarBtn.disabled = true;



    // Establecer la fecha actual en el campo de fecha
    document.getElementById("fechaActual").value = new Date().toISOString().split("T")[0];

    // const fechaISO = "2025-01-04"; // Formato original (YYYY-MM-DD)
    const fechaISO = new Date().toISOString().split("T")[0];
    const [year, month, day] = fechaISO.split("-"); // Divide la cadena en partes
    //const fechaFormateada = `${month}-${day}-${year}`; // Reorganiza los valores
    const fechaFormateada = `${day}/${month}/${year}`; // Reorganiza los valores
    console.log(fechaFormateada); // Salida: 01-04-2025
    //document.getElementById("fechaActual").value = fechaFormateada;


    //const fechaFormateada = new Date(fechaRetiro).toLocaleDateString('es-ES'); // Para español
    // const terminox = " SI ESTOY DE ACUERDO E INFORMADO que tengo un lapso de 15 dias para retirar mi equipo cuando se notifique, si no este sera RECICLAD ";
    const termino = " SI, ESTOY DE ACUERDO E INFORMADO  Tengo 15 DIAS desde la notificación para retirar mi equipo; de lo contrario, será RECICLADO.";



    // Lógica para enviar el mensaje de WhatsApp






    function validarCheckbox() {
        let checkbox = document.getElementById("aceptarCondiciones");
        let botonEnviar = document.getElementById("botonEnviar");
        enviarBtn.disabled = !checkbox.checked; // Habilita si está marcado, deshabilita si no
    }
</script>